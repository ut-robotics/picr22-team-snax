== Mainboard

This board is designed to control 3 motor drivers. It also provides power for the 3 motor drivers,  The main communication for each motor is through the STM32G441KBT6 chip. Power is supplied to the chip via a USB connection that is protected by a CM1223-02SO TVS diode package.

 The motor driver side is powered by an external LiPo battery and is isolated from the MCU side, and the signal goes through isolators before reaching the motor drivers for proper power and signal transfer. This board is suitable for operating any brushed 12V DC motor with a power output over 3.2A and is specifically designed to work with 12V Pololu motors with encoders.


== Electronics 

[cols="a,a", frame=none, grid=none]
|===
| image::board_layout.png[]
| image::board_layout_b.png[]
|===

Mainboard consists of:

* STM32G441KB microcontroller

* Programmer connector for connecting STLink programmer to the
microcontroller.
* USB connector for powering the microcontroller and for communicating
with robot’s computer.
* Three motor driver connected to two isolators to avoid short circuits
on the motor’s side damaging the computer.
* Three encoder connectors input and one PWM output for controlling the
thrower

The mainboard is supplied with 16v on the motor drivers side with a
reverse voltage protection for avoiding reverse voltage damaging the
components. The motor drivers have 3 x 3 mm pads for each motor driver
power outputs.

Connector pinouts:

• Power input

* -  J12 -> Power input positive potential
* -  J14 -> Power input negative potential

• Motor drivers’ outputs

* -  J10/J13 -> Motor driver output for the first motor
* -  J7/J8 -> Motor driver output for the second motor
* -  J5/6 -> Motor driver output for the third motor

* •  J1 thrower connector 1- GND

2- PWM +
3- Not used 
4- Not used

* •  J2, J3, J4 encoders 1- GND

2- +3,3 +
3- TIM_CH1 4- TIM_CH2

[width="99%",cols="29%,26%,22%,23%",options="header",]
|===
|*COMPONENTS* | | |
|Name |Comment |Designator |Quantity

|DRV8243 |Motor Driver |U3, U5, U8 |3

a|
Amphenol 10118193-

0001LF

|USB connector |J9 |1

a|
CM1223-02SO TVS diode

array

|USB protection |U4 |1

|STM32G441KBT6 |Microcontroller |U1 |1

|MAX14930DASE+ |Isolator (SOIC16 package) |U2, U7 |2

|Micro-Match 215079-4 |Encoder, PWM connectors |J3, J4, J2, J6 |4

a|
Samtec FTSH-105-01-L-

DV-K

|Programmer connector |J1 |1

|BUK6Y10-30P |Reverse voltage protection |Q1 |1

|NCP164CSN330T1G a|
Voltage regulator for

microcontroller

|U9 |1

|NCV8730ASN500T1G a|
Voltage regulator at the

motor driver’s side

|U6 |1

|10k 0603 |Resistor |R1, R5, R10 |3

|1k 0603 |Resistor |R2 |1

|2.7k 0603 |Resistor |R3, R11, R6 |3

|100k 0603 |Resistor |R12, R13, R14 |3

|0.1 uF 0603 |Capacitor (MC) |C1, C5, C6, C2, C3, C4, C7, C8, C9, C10,
C13 |11

|1 uF 0603 |Capacitor |C11, C12, C14, C15 |4

|10 uF 0805 |Capacitor |C18, C19, C20, C21, C22, C23, C24, C25, C26,
C27, C28, C29, C30, C31, C32 |*15*
|===

Firmware:
https://github.com/ut-robotics/picr22-team-snax/tree/electronics/firmware

Gerber X2 files:
https://github.com/ut-robotics/picr22-team-snax/blob/electronics/picr22-team-snax-mainboard_v3011.zip

PCB:
https://github.com/ut-robotics/picr22-team-snax/tree/electronics/picr22-team-snax-mainboard